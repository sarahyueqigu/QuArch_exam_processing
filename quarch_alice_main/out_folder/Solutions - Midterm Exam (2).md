# Solutions - Midterm Exam

```
              (February 14[th] @ 7:30 pm)
  Presentation and clarity are very important! Show your procedure!

## PROBLEM 1 (20 PTS)

```
- Compute the result of the following operations. The operands are signed fixed-point numbers. The result must be a signed
fixed point number. For the division, use ğ‘¥= 5 fractional bits.

|1.010001 + 1.011|1001.1101 - 1.011101|0.010101 + 01.11111|
|---|---|---|
|10.101 ï‚´ 0.10011|1.011 ï‚´ 1.0101|10.10010 ï‚¸ 0.101|

```
1 1.0 1 0 0 0 1 +
1 1.0 1 1 0 0 0
1 0.1 0 1 0 0 1

```
```
0 0 0.0 1 0 1 0 1 +
0 0 1.1 1 1 1 1 0
0 1 0.0 1 0 0 1 1

```
```
1 0 0 1.1 1 0 1 0 0 1 1 1 1.0 1 1 1 0 1

```
```
1 0 0 1.1 1 0 1 0 0 +
0 0 0 0.1 0 0 0 1 1
1 0 1 0.0 1 0 1 1 1

```
```
 1.011 x
1.0101

```
```
 10.101 x
0.10011 

```
```
 01.011 x
0.10011 

```
```
1 0 0 1 1 x
 1 0 1 1 

```
```
 0.101 x
0.1011 

```
```
1 0 1 1 x
 1 0 1 

```
```
     1 0 0 1 1 
    1 0 0 1 1  
  0 0 0 0 0   
 1 0 0 1 1    
0 1 1 0 1 0 0 0 1 

```
```
     1 0 1 1 
    0 0 0 0  
  1 0 1 1   
0 0 1 1 0 1 1 1 

```
```
0.0 1 1 0 1 1 1

```
```
0.1 1 0 1 0 0 0 1
1.0 0 1 0 1 1 1 1

```

01.0111

00.1010 [=]


010111

001010 [â‰¡]


10111

1010


âœ“


10.10010 01.0111

0.101 [: To unsigned (numerator) and then alignment, ][ğ‘ = 4][: ] 0.101 [=]
```
    0001001001

```
`1010` `1011100000` Append ğ‘¥ = 5 zeros: 10111ğŸğŸğŸğŸğŸ1010

`1010` Integer Division:
```
      1100

```
ğ‘„= 1001001, ğ‘…= 110
```
      1010
```
â†’ğ‘„ğ‘“= 10.01001 (ğ‘¥= 5)

```
10000
 1010

```

Final result (2C):


01.01110 = 2ğ¶(010.01001) = 101.10111

1.011

```
           110

## PROBLEM 2 (10 PTS)

```
- Represent these numbers in Fixed Point Arithmetic (signed numbers). Select the minimum number of bits in each case.

âœ“ `-16.375` âœ“ `32.3125`
```
    +16.375 = 010000.011 +32.3125 = 0100000.0101

```
ïƒ -16.375 = 101111.101



- Complete the table for the following fixed point formats (signed numbers): (6 pts.)

**Integer bits** **Fractional Bits** **FX Format** **Range** **Resolution**

6 3 [9 3] [âˆ’2[5], 2[5] âˆ’2[âˆ’3]] 2[âˆ’3]

8 5 [13 5] [âˆ’2[7], 2[7] âˆ’2[âˆ’5]] 2[âˆ’5]

|Integer bits|Fractional Bits|FX Format|Range|Resolution|
|---|---|---|---|---|
|6|3|[9 3]|[âˆ’25, 25 âˆ’2âˆ’3]|2âˆ’3|


-----

## PROBLEM 3 (40 PTS)

- Calculate the result (provide the 32-bit result) of the following operations with 32-bit floating point numbers. Truncate the
results when required. When doing fixed-point division, use 4 fractional bits. Show your procedure.

âœ“ `C1500000 + 436A0000` âœ“ `D0A90000 â€“ CF480000` âœ“ `80400000 ï‚´ 7AB80000` âœ“ `FBB80000 ï‚¸ 49400000`

âœ“ ğ‘‹ = C1500000 + 436A0000:
```
    C1500000: 1100 0001 0101 0000 1000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10000010 = 130 â†’ğ‘’= 130 âˆ’127 = 3 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.101
```
     C1500000 = âˆ’1.101 Ã— 2[3]

```
|âœ“ C1500000 + 436A0000|âœ“ D0A90000 â€“ CF480000|âœ“ 80400000 ï‚´ 7AB80000|âœ“ FBB80000 ï‚¸ 49400000|
|---|---|---|---|

```
436A0000: 0100 0011 0110 1010 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10000110 = 134 â†’ğ‘’= 134 âˆ’127 = 7 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.110101
```
  436A0000 = 1.110101 Ã— 2[7]

```
ğ‘‹= âˆ’1.101 Ã— 2[3] + 1.110101 Ã— 2[7] = âˆ’ [1.101] Ã— 2[7] + 1.110101 Ã— 2[7]

2[4]

ğ‘‹= (âˆ’0.0001101 + 1.110101) Ã— 2[7]

To subtract these unsigned numbers, we first convert to 2C:

ğ‘…= 01.110101 âˆ’0.0001101 = 01.110101 + 1.1110011
The result in 2C is: ğ‘…= 01.1011101
For floating point, we need to convert to sign-and-magnitude:
ïƒ ğ‘…(ğ‘†ğ‘€) = +1.1011101

- You can also do unsigned subtraction: ğ‘‹= (1.110101 âˆ’0.0001101) Ã— 2[7]

ğ‘‹= 1.1011101 Ã— 2[7], ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 7 + 127 = 134 = 10000110
ğ‘‹ = 0100 0011 0101 1101 0000 0000 0000 0000 = `435D0000`

```
0 1.1 1 0 1 0 1 0 +
1 1.1 1 1 0 0 1 1
0 1.1 0 1 1 1 0 1

```
```
1.1 1 0 1 0 1 0 0.0 0 0 1 1 0 1
1.1 0 1 1 1 0 1

```

âœ“ ğ‘‹ = D0A90000 â€“ CF480000:
```
  D0A90000: 1101 0000 1010 1001 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10100001 = 161 â†’ğ‘’= 161 âˆ’127 = 34 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.0101001
```
    D0A90000 = âˆ’1.0101001 Ã— 2[34]
  CF480000: 1100 1111 0100 1000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10011110 = 158 â†’ğ‘’= 158 âˆ’127 = 31 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.1001
```
    CF480000 = âˆ’1.1001 Ã— 2[31]

```

ğ‘‹= âˆ’1.0101001 Ã— 2[34] + 1.1001 Ã— 2[31] = âˆ’1.0101001 Ã— 2[34] + [1.1001] Ã— 2[34]

2[3]

ğ‘‹= âˆ’(1.0101001 âˆ’0.0011001) Ã— 2[34] (unsigned subtraction)
ğ‘‹= âˆ’1.001 Ã— 2[34], ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 34 + 127 = 161 = 10100001
ğ‘‹ = 1101 0000 1001 0000 0000 0000 0000 0000 = `D0900000`


âœ“ ğ‘‹ = 80400000 ï‚´ 7AB80000:
```
  80400000: 1000 0000 0100 0000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 00000000 = 0 â†’ğ·ğ‘’ğ‘›ğ‘œğ‘Ÿğ‘šğ‘ğ‘™ ğ‘›ğ‘¢ğ‘šğ‘ğ‘’ğ‘Ÿâ†’ğ‘’= âˆ’126 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 0.1
```
    80400000 = âˆ’0.1 Ã— 2[âˆ’126]
  7AB80000: 0111 1010 1011 1000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 11110101 = 245 â†’ğ‘’= 245 âˆ’127 = 118 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.0111
```
    7AB80000 = 1.0111 Ã— 2[118]

```
```
1.0 1 0 1 0 0 1 0.0 0 1 1 0 0 1
1.0 0 1 0 0 0 0

```

ğ‘‹= (âˆ’0.1 Ã— 2[âˆ’126]) Ã— (1.0111 Ã— 2[118]) = âˆ’0.10111 Ã— 2[âˆ’8] = âˆ’1.0111 Ã— 2[âˆ’9]
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = âˆ’9 + 127 = 118 = 01110110
ğ‘‹ = 1011 1011 0011 1000 0000 0000 0000 0000 = `BB380000`


âœ“ ğ‘‹ = FBB80000 ï‚¸ 49400000:
```
  FBB80000: 1111 1011 1011 1000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 11110111 = 247 â†’ğ‘’= 247 âˆ’127 = 120 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.0111
```
    FBB80000 = âˆ’1.0111 Ã— 2[120]
  49400000: 0100 1001 0100 0000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10010010 = 146 â†’ğ‘’= 146 âˆ’127 = 19 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.1
```
    49400000 = 1.1 Ã— 2[19]

```

-----

ğ‘‹= âˆ’ [1.0111 Ã— 2][120] = âˆ’ [1.0111] Ã— 2[101]

1.1 Ã— 2[19] 1.1


Alignment:

1.0111

= [1.0111]
1.1 1.1000 [= 10111]11000

```
11000

```
```
000001111
101110000
 11000
 101100
 11000
 101000
  11000
  100000
  11000
   1000

```

Append ğ‘¥ = 4 zeros: 10111ğŸğŸğŸğŸ

11000

Integer division

ğ‘„= 1111 â†’ğ‘„ğ‘“= 0.1111


Thus: ğ‘‹= âˆ’0.1111 Ã— 2[101] = âˆ’1.111 Ã— 2[100]
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 100 + 127 = 227 = 11100011

ğ‘‹ = `1111 0001 1111 0000 0000 0000 0000 0000 =` `F1F00000`

## PROBLEM 4 (30 PTS)

- â€œCounting 0â€™sâ€ Circuit: It counts the number of bits in register A that has the value of â€˜0â€™.
The digital system is depicted below: FSM + Datapath. Example: For ğ‘›= 8: if ğ´= 00110110, then ğ¶= 0100.
âœ“ m-bit counter: ğ‘ ğ‘ğ‘™ğ‘Ÿ. If ğ¸= ğ‘ ğ‘ğ‘™ğ‘Ÿ= 1, the count is initialized to zero. If ğ¸= 1, ğ‘ ğ‘ğ‘™ğ‘Ÿ= 0, the count is increased by 1.
âœ“ Parallel access shift register: If ğ¸= 1: ğ‘ _ğ‘™ = 1 â†’ Load, ğ‘ _ğ‘™= 0 â†’ Shift.

- Sketch the Finite State Machine diagram (in ASM form) given the algorithm (for ğ‘›= 8, ğ‘š= 4). (18 pts.)
âœ“ The process begins when ğ‘  is asserted, at this moment we capture ğ·ğ´ on register ğ´. Then the process starts by shifting

ğ´ one bit at a time. The process is concluded when ğ´= 2[ğ‘›] âˆ’1. The signal ğ‘‘ğ‘œğ‘›ğ‘’ is asserted when we finish counting.

âœ“ Note: If ğ´= 2[ğ‘›] âˆ’1 â†’ ğ‘§= 1, else ğ‘§= 0. As ğ´ is being shifted, each time ğ‘0 = 0, we need to increase the count C.

- Complete the timing diagram (next page) where ğ‘›= 8, ğ‘š= 4. (12 pts.)
```
               DA

```
ğ‘›
```
  resetn

```
```
   1 din
  LA s_l
  EA E

```
Parallel Access

Right Shift (MSB to LSB)
```
 s_l = 1 â†’ Load
s_l = 0 â†’ Shift

```

##### ALGORITHM
```
C ï‚¬ 0
while A ï‚¹ 11...1 (2[n]-1)
  if a0 = 0 then
    C ï‚¬ C + 1
  end if
  right shift A
end while

```

**FINITE STATE MACHINE**


-----

Finite State Machine:

**S3**

0
```
 clock
 resetn

```

resetn=0

```
DA 10101110 11110101
 s

```
```
 A
state
 C

```
```
 00 00 AE D7 EB F5 FA FD FE FF FF FF FF FF FF FF
 S1 S1 S2 S2 S2 S2 S2 S2 S2 S2 S3 S1 S1 S1 S1 S1
0000 0000 0000 0001 0001 0001 0001 0010 0010 0011 0011 0011 0000 0000 0000 0000

```
```
sclrC
 EC
done
 z
 EA
 LA

```
|0 S1 00|10101 00 S1 0000|110 AE S2 0000|D7 S2 0001|EB S2 0001|F5 S2 0001|FA S2 0001|FD S2 0010|FE S2 0010|FF S2 0011|11110 FF S3 0011|101 FF S1 0011|FF S1 0000|FF S1 0000|FF S1 0000|FF S1 0000|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
|||||||||||||||||
|||||||||||||||||
|||||||||||||||||
|||||||||||||||||
|||||||||||||||||
|||||||||||||||||
|||||||||||||||||


-----


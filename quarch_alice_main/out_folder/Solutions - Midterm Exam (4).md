# Solutions - Midterm Exam
```
   (February 16[th] @ 7:30 pm)

```
```
  Presentation and clarity are very important! Show your procedure!

### PROBLEM 1 (20 PTS)

```
- Compute the result of the following operations. The operands are signed fixed-point numbers. The result must be a signed
fixed-point number. For the division, use ğ‘¥= 5 fractional bits.

|1.0111 + 1.101001|1.010101 â€“ 1000.0101|01.11111 + 0.10001|
|---|---|---|
|10.101 ï‚´ 1.01101|0.111 ï‚´ 1.0101|10.101 ï‚¸ 0.101|

```
(February 16[th] @ 7:30 pm)

```
```
1.0 1 1 1 0 0 +
1.1 0 1 0 0 1

```
```
1 1 1 1.0 1 0 1 0 1 1 0 0 0.0 1 0 1 0 0

```
```
0 0 1.1 1 1 1 1 +
0 0 0.1 0 0 0 1
0 1 0.1 0 0 0 0

```
```
1 1 1 1.0 1 0 1 0 1 +
0 1 1 1.1 0 1 1 0 0
0 1 1 1.0 0 0 0 0 1

```
```
1.0 0 0 1 0 1
 10.101 x
1.01101 

```
```
 01.011 x
0.10011 

```
```
1 0 0 1 1 x
 1 0 1 1 

```
```
 0.111 x
0.1011 

```
```
1 0 1 1 x
 1 1 1 

```
```
 0.111 x
1.0101

```
```
     1 0 0 1 1 
    1 0 0 1 1  
  0 0 0 0 0   
 1 0 0 1 1    
0 1 1 0 1 0 0 0 1 

```
```
     1 0 1 1 
    1 0 1 1  
  1 0 1 1   
0 1 0 0 1 1 0 1 

```
```
0.1 0 0 1 1 0 1
1.0 1 1 0 0 1 1

```

âœ“

```
            0.1 1 0 1 0 0 0 1

```
10.1010 01.0110 01.011 1011

0.101 [: To unsigned (numerator) and then alignment, ][ğ‘ = 3][: ] 0.101 [=] 00.101 [â‰¡] 101
```
    001000110

```
`101` `101100000` Append ğ‘¥ = 5 zeros: 1011ğŸğŸğŸğŸğŸ101

`101` Integer Division:
```
     01000

```
ğ‘„= 1000110, ğ‘…= 10
```
      101
```
â†’ğ‘„ğ‘“= 10.00110 (ğ‘¥= 5)
```
       110

```
`101` Final result (2C): 10.1010

0.101 [= 2ğ¶(010.0011) = 101.1101]
```
        10

```

### PROBLEM 2 (10 PTS)

- Represent these numbers in Fixed Point Arithmetic (signed numbers). Use the FX format [12 4].

âœ“ `-16.125` âœ“ `19.25`
```
  +16.125 = 010000.001 ïƒ -16.125 = 11101111.1110 +19.25 = 00010011.0100

```
- Complete the table for the following fixed point formats (signed numbers): (6 pts.)

|Integer bits|Fractional Bits|FX Format|Range|Resolution|
|---|---|---|---|---|
|8|6|[14 6]|[âˆ’27, 27 âˆ’2âˆ’6]|2âˆ’6|
|6|4|[10 4]|[âˆ’25, 25 âˆ’2âˆ’4]|2âˆ’4|


-----

### PROBLEM 3 (40 PTS)

- Perform the following 32-bit floating point operations. For fixed-point division, use 4 fractional bits. Truncate the result when
required. Show your work: how you got the significand and the biased exponent bits of the result. Provide the 32-bit result.

âœ“ `40D00000 + C2EA0000` âœ“ `50A90000 â€“ 4F480000` âœ“ `80200000 ï‚´ 7AB80000` âœ“ `FB380000 ï‚¸ 48C00000`

âœ“ ğ‘‹ = 40D00000 + C2EA0000:
```
    40D00000: 0100 0000 1101 0000 1000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10000001 = 129 â†’ğ‘’= 129 âˆ’127 = 2 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.101
```
     40D00000 = 1.101 Ã— 2[2]

```
|âœ“ 40D00000 + C2EA0000|âœ“ 50A90000 â€“ 4F480000|âœ“ 80200000 ï‚´ 7AB80000|âœ“ FB380000 ï‚¸ 48C00000|
|---|---|---|---|

```
C2EA0000: 1100 0010 1110 1010 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10000101 = 133 â†’ğ‘’= 133 âˆ’127 = 6 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.110101
```
  C2EA0000 = âˆ’1.110101 Ã— 2[6]

```
ğ‘‹= 1.101 Ã— 2[2] âˆ’1.110101 Ã— 2[6] = + [1.101] Ã— 2[6] âˆ’1.110101 Ã— 2[6] = (0.0001101 âˆ’1.110101) Ã— 2[6]

2[4]


To subtract these numbers, we first convert to 2C:

ğ‘…= 0.0001101 âˆ’01.110101 = 0.0001101 + 10.001011 (2C addition)

The result in 2C is: ğ‘…= 10.0100011, âˆ’ğ‘…= 01.1011101

_* Note that you can also do unsigned subtraction: ğ‘‹= âˆ’(1.110101 âˆ’0.0001101 âˆ’) Ã— 2[6]_

For floating point, we need to convert to sign-and-magnitude:
ïƒ ğ‘…(ğ‘†ğ‘€) = âˆ’1.1011101

ğ‘‹= âˆ’1.1011101 Ã— 2[6], ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 6 + 127 = 133 = 10000101
ğ‘‹ = 1100 0010 1101 1101 0000 0000 0000 0000 = `C2DD0000`

```
0 0.0 0 0 1 1 0 1 +
1 0.0 0 1 0 1 1 0
1 0.0 1 0 0 0 1 1

```

âœ“ ğ‘‹ = 50A90000 â€“ 4F480000:
```
  50A90000: 0101 0000 1010 1001 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10100001 = 161 â†’ğ‘’= 161 âˆ’127 = 34 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.0101001
```
    50A90000 = 1.0101001 Ã— 2[34]
  4F480000: 0100 1111 0100 1000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10011110 = 158 â†’ğ‘’= 158 âˆ’127 = 31 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.1001
```
    4F480000 = 1.1001 Ã— 2[31]

```

ğ‘‹= 1.0101001 Ã— 2[34] âˆ’1.1001 Ã— 2[31] = 1.0101001 Ã— 2[34] âˆ’ [1.1001] Ã— 2[34]

2[3]

ğ‘‹= (1.0101001 âˆ’0.0011001) Ã— 2[34] (unsigned subtraction)

ğ‘‹= 1.001 Ã— 2[34], ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 34 + 127 = 161 = 10100001
ğ‘‹ = 0101 0000 1001 0000 0000 0000 0000 0000 = `50900000`

```
1.0 1 0 1 0 0 1 0.0 0 1 1 0 0 1
1.0 0 1 0 0 0 0

```

âœ“ ğ‘‹ = 80200000 ï‚´ 7AB80000:
```
  80200000: 1000 0000 0010 0000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 00000000 = 0 â†’ğ·ğ‘’ğ‘›ğ‘œğ‘Ÿğ‘šğ‘ğ‘™ ğ‘›ğ‘¢ğ‘šğ‘ğ‘’ğ‘Ÿâ†’ğ‘’= âˆ’126 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 0.01
```
    80200000 = âˆ’0.01 Ã— 2[âˆ’126]
  7AB80000: 0111 1010 1011 1000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 11110101 = 245 â†’ğ‘’= 245 âˆ’127 = 118 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.0111
```
    7AB80000 = 1.0111 Ã— 2[118]

```

ğ‘‹= (âˆ’0.01 Ã— 2[âˆ’126]) Ã— (1.0111 Ã— 2[118]) = âˆ’0.010111 Ã— 2[âˆ’8] = âˆ’1.0111 Ã— 2[âˆ’10]
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = âˆ’10 + 127 = 117 = 01110101
ğ‘‹ = 1011 1010 1011 1000 0000 0000 0000 0000 = `BAB80000`


âœ“ ğ‘‹ = FB380000 ï‚¸ 48C00000:
```
  FB380000: 1111 1011 0011 1000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 11110110 = 246 â†’ğ‘’= 246 âˆ’127 = 119 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.0111
```
    FB380000 = âˆ’1.0111 Ã— 2[119]
  48C00000: 0100 1000 1100 0000 0000 0000 0000 0000

```
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 10010001 = 145 â†’ğ‘’= 145 âˆ’127 = 18 ğ‘†ğ‘–ğ‘”ğ‘›ğ‘–ğ‘“ğ‘–ğ‘ğ‘ğ‘›ğ‘‘= 1.1
```
    48C00000 = 1.1 Ã— 2[18]

```

-----

ğ‘‹= âˆ’ [1.0111 Ã— 2][119] = âˆ’ [1.0111] Ã— 2[101]

1.1 Ã— 2[18] 1.1

```
11000

```
```
000001111
101110000
 11000
 101100
 11000
 101000
  11000
  100000
  11000
   1000

```

Alignment:

1.0111

= [1.0111]
1.1 1.1000 [= 10111]11000

Append ğ‘¥ = 4 zeros: 10111ğŸğŸğŸğŸ

11000


Integer division

ğ‘„= 1111 â†’ğ‘„ğ‘“= 0.1111


Thus: ğ‘‹= âˆ’0.1111 Ã— 2[101] = âˆ’1.111 Ã— 2[100]
ğ‘’+ ğ‘ğ‘–ğ‘ğ‘ = 100 + 127 = 227 = 11100011

ğ‘‹ = `1111 0001 1111 0000 0000 0000 0000 0000 =` `F1F00000`

### PROBLEM 4 (30 PTS)

- **Greatest Common Divisor (GCD): This circuit computes the GCD of two ğ‘›-bit unsigned numbers (A, B). For example:**

âœ“ A = 216, B = 192 â†’ GCD = 24. âœ“ A = 132, B = 72 â†’ GCD = 12. âœ“ A = 169, B = 63 â†’ GCD = 1.

- The digital system is depicted below (FSM + Datapath) for ğ‘›= 8. This iterative circuit is based on Euclidâ€™s GCD algorithm.
âœ“ Input Data: DA, DB Output data: GCD

|âœ“ A = 216, B = 192 â†’ GCD = 24.|âœ“ A = 132, B = 72 â†’ GCD = 12.|âœ“ A = 169, B = 63 â†’ GCD = 1.|
|---|---|---|

```
s

```

**FSM**


done


âœ“ z=1 when ğ‘ğ‘– = ğ‘ğ‘–, else z=0.

**Sequential Algorithm**
```
  a,b: unsigned integers
  while a ï‚¹ b
    if a > b
      a ï‚¬ a-b
    else
      b ï‚¬ b-a
    end
  end while
  return a

```
```
GCD

```
```
   DA DB

```
8 8
```
         L
   1 1
          Eb

```
E

9 9

b b

+/- '1' '1' +/
9

**SA**
```
      AlB

```
**next_a=SA[7..0]** `AlB = SA`

**next_b=SB[7..0]**


-----

- Sketch the Finite State Machine diagram (in ASM form) given the sequential algorithm (for ğ‘›= 8). (18 pts.)
âœ“ The process begins when ğ‘  is asserted, at this moment we capture DA and DB on register ğ‘ğ‘– and ğ‘ğ‘– (respectively). Then

the process continues by updating ğ‘ğ‘– and ğ‘ğ‘– and it is concluded when ğ‘ğ‘– = ğ‘ğ‘–. The signal done is asserted when the
result is computed and appears on output GCD.

Finite State Machine:


**FSM**


resetn=0



- Complete the timing diagram where ğ‘›= 8. DA and DB are provided as unsigned decimals. You can provide ğ‘ğ‘– and ğ‘ğ‘– as
unsigned decimals. (12 pts.)

```
 clock
resetn
  s
  DA
  DB
  z
 AlB
state
 done

```
|Col1|Col2|Col3|Col4|Col5|Col6|Col7|Col8|Col9|Col10|Col11|Col12|Col13|Col14|Col15|Col16|Col17|Col18|Col19|
|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
|0|0|216|24|24|24|24|24|24|24|24|24|24|15|5|5|5|5|5|
||||||||||||||||||||
|0|0|192|192|168|144|120|96|72|48|24|24|24|10|10|5|5|5|5|
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
||||||||||||||||||||
|S1|S1|S2|S2|S2|S2|S2|S2|S2|S2|S2|S3|S1|S2|S2|S2|S3|S1|S1|
||||||||||||||||||||


-----

